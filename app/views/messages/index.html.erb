<%= render "shared/header"%>
<%= render "shared/side_bar_edit" %>

<div class="main-content">
 <div class="title">
  <%= @room.name %>
 </div>
  <div class="blog-content-show">
      <div class="follow-contents">
       <div class="message">
        <div class="upper-message">
         <div class="message-user">
          <% if @messages %>
           <% @messages.each do |message| %>
            <%# 投稿したユーザー情報を出力する %>
            <%= message.user.nickname %>
         </div>
          <div class="message-date">
          <%# 投稿した時間を出力する %>
            <%= message.created_at %>
          </div>
        </div>
         <div class="lower-message">
          <div class="message-content">
           <%# 投稿したメッセージ内容を記述する %>
           <%= message.message_text %>
          </div>
           <%= image_tag messages.image.variant(resize:'500x500'), class: 'message-image' if message.image.attached?%>
           <% end %>
         <% end %>
       </div>
      </div>
       <div class="follow-content">
        <%= form_with model: [@room, @message], method: :post, local: true do |f| %>
         <%= f.text_field :message_text, placeholder: "メッセージを入力してください", class:"message-form"  %>
         <%= f.file_field :image, class:"hidden" %>
         <%= f.submit "送信", class:"message-btn" %>
        <% end %>
       </div>
      </div>
  </div>
</div>